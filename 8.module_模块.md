# angular tutorial  / angular 教程

## 8，模块

模块是angular 组件component，指令directive，管道pipe生存的最小单元

#### 创建一模块

    ng g m <module_name>

或者手动创建

（1） 定义一个class  （2）@NgModule装饰器

    import { NgModule } from '@angular/core';
    import { CommonModule } from '@angular/common';
    import { LanguageComponent } from './language/language.component';
    import { NationsComponent } from './nations/nations.component';
    import { ChinaRoutingModule } from './china-routing.module';
    import { ChinaComponent } from './china.component';


    @NgModule({
        declarations: [
            LanguageComponent,
            NationsComponent,
            ChinaComponent
            ],
        imports: [
            CommonModule,
            ChinaRoutingModule
        ]
    })
    export class ChinaModule { }

注意：编写的路由文件ChinaRoutingModule，只需要在这里引入即可。 根module引入这个chinaModule后就会合并子module的路由。

#### featured module 特性模块

当你需要把多个业务分散到各个子模块中，而不是大统一的放到app.module中时，就需要一个特性模块。

（1） 写一个module(如上) （2）编写一个路由module支配这个子module里面的组件展示


    @NgModule({
    declarations: [
        DoorComponent, 
        RenComponent],
    imports: [
        CommonModule,  //引入这个module 支持各种内置的ngIf, pipe 。。。。
        HelloRoutingModule
    ]
    })
    export class HelloModule { }

----

    const routes:Routes = [
        {
            path:"",
            redirectTo:"door"
        },
        {
            path:"door",
            component:DoorComponent
        },
        {
            path:"ren",
            component:RenComponent
        }
    ];

    @NgModule({
        imports:[
            RouterModule.forChild(routes)
        ],
        exports:[
            RouterModule
        ]
    })
    export class HelloRoutingModule {}  

#### shared module
 
当需要把一些工具类的函数，方法，指令共享时(多个模块，多个组件复用)，就需要有一个package把这些东西收纳起来。

shared module 和普通module定义上没区别，但是需要把提供的公共能力exports出来，然后在需要使用的module中引入即可。无需再次声明declarations。

    @NgModule({
    declarations: [
        OrderPipe,
        KitchenComponent, 
        ShowDirective
    ],
    imports: [
        CommonModule
    ],
    exports:[//导出提供的能力，指令，pipe，component
        OrderPipe, 
        KitchenComponent, 
        ShowDirective    
    ]
    })
    export class SharedModule { }

#### lazyload module

当我们把相应的业务分到不同的子module的时候，我们希望在需要的时候再加载，这就需要lazyload

angular8 之后，不使用字符串形式了，改用import

    {
        path:"hello",
        loadChildren:()=>import('./hello/hello.module').then( (mod:any)=>{ return mod.HelloModule } )
    },   
    {
        path:"demos",
        loadChildren:()=>import('./demos/demos.module').then( (mod:any)=>{ return mod.DemosModule } )
    },  

    