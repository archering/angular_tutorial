# angular tutorial  / angular 教程

## 4，自定义指令

指令是angular内部用来支配或者说操作dom的标记。
之前我们用到的指令，*ngIf, *ngFor, ng-content，ngStyle, ngClass等都是angular自带的内部指令，已经封装到了@angular/core里面

####  自定义指令， custome directive

我们自定义一个指令 myHover ,这个指令的作用就是当你鼠标hover到他上面时变换背景色和前景色。

你可以手工创建，也可以用下面的指令创建

    ng  generate directive myHover

或者

    ng  g d myHover


代码如下： 注意，在angular框架下，任何一个组件，指令，filter，service 都是一个class，当他们想要表现不同的特征时，需要用不同的装饰器修饰

    import { Directive } from '@angular/core';

    @Directive({
        selector: '[myHover]' //这里也可以是 myHover 表示标签形式，这里是属性形式
    })
    export class MyHoverDirective {

        constructor() { }

    }

当前，还需要挂载到合适的module上才能使用

        @NgModule({
            declarations: [
                AppComponent,
                PageComponent,
                MyHoverDirective //进行声明
            ],
            imports: [
                BrowserModule,
                FormsModule
            ],
            providers: [],
            bootstrap: [AppComponent]
        })


如何操作dom

（1）方式一，使用element和他的nativeElement（有点类似于angularjs里面的link函数）

    import { Directive, ElementRef } from '@angular/core';

    @Directive({
        selector: '[myHover]'
    })
    export class MyHoverDirective {

        constructor(private element:ElementRef) {

        }
        //这个时候就要用到声明周期函数了
        ngOnInit(){
            this.element.nativeElement.style.color = "red";
        }

    }

(2) 方式二，使用render2 进行操作